{% extends "base.html" %}
{% block content %}
<div class="container py-4 mx-auto">
  <div class="row mb-3 align-items-center">
    <div class="col-md-8">
      <h4 class="mb-0">المنتجات المفقودة</h4>
    </div>
    <div class="col-md-4 text-end">
      <a href="{% url 'panel:lost_product_add' %}" class="btn btn-success shadow-sm">
        <i class="bi bi-plus-circle"></i> إضافة مفقود جديد
      </a>
    </div>
  </div>
  <div class="card shadow">
    <div class="card-header bg-info text-white d-flex justify-content-between align-items-center">
      <strong class="mb-0 text-white">قائمة المنتجات المفقودة</strong>
    </div>
    <div class="card-body">
      <div class="table-responsive">
        <table class="min-w-full divide-y divide-gray-200">
          <thead class="bg-gray-100">
            <tr>
              <th class="px-4 py-2 text-right font-bold">المنتج</th>
              <th class="px-4 py-2 text-right font-bold">رقم التشغيلة</th>
              <th class="px-4 py-2 text-right font-bold">تاريخ الانتهاء</th>
              <th class="px-4 py-2 text-right font-bold">الكمية المفقودة</th>
              <th class="px-4 py-2 text-right font-bold">ملاحظة</th>
              <th class="px-4 py-2 text-right font-bold">تاريخ الفقد</th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-100">
            {% for lost in lost_products %}
            <tr>
              <td class="px-4 py-2">{{ lost.product.name }}</td>
              <td class="px-4 py-2">{{ lost.inventory.shipment.batch_number }}</td>
              <td class="px-4 py-2">{{ lost.inventory.shipment.expiry_date }}</td>
              <td class="px-4 py-2">{{ lost.quantity }}</td>
              <td class="px-4 py-2">{{ lost.note|default:"-" }}</td>
              <td class="px-4 py-2">{{ lost.lost_at|date:"Y-m-d H:i" }}</td>
            </tr>
            {% empty %}
            <tr>
              <td colspan="6" class="text-center text-muted py-4">
                <i class="bi bi-emoji-frown fs-3"></i><br>
                لا توجد منتجات مفقودة.
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
{% endblock %}
